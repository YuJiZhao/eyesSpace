---
title: 音乐
type: "music"
aside: false
comments: false
top_img: false
---

<!DOCTYPE html>
<html lang="th">

<head>
    <!-- require APlayer -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css">
    <script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js"></script>
</head>

<body>
    <div id="aplayer"></div>
</body>
<script>
    var data = null;
    var count = 0;

    $.get("https://api.i-meto.com/meting/api", {
        server: "netease",
        type: "playlist",
        id: "6936632013"
    }, res => {
        data = res.sort(() => Math.random() - 0.5);
        fun(data);
    });

    let fun = data => {
        const ap = new APlayer({
            container: document.getElementById('aplayer'),
            mini: false,
            autoplay: false,
            theme: '#FADFA3',
            loop: 'none',
            order: 'list',
            preload: 'none',
            volume: 0.7,
            mutex: true,
            lrcType: 3,
            listFolded: false,
            listMaxHeight: 90,
            audio: data
        });
        ap.on('ended', function () {
            count++;
            $("#page").css("background-image", `url('https://cdn.jsdelivr.net/gh/YuJiZhao/picbed/blog/song/${data[count].title}.png')`)
            let clear2 = setInterval(() => {
                $(".aplayer .aplayer-lrc p").css({
                    "color": "rgb(238,122,45)",
                    "font-size": "16px"
                });
            })
            setTimeout(() => {
                clearInterval(clear2);
            }, 3000)
            $(".aplayer-played").css({
                "background": "rgb(20, 214, 214)"
            });
        });
    }

    // 删除伪元素
    let sty = document.createElement('style');
    sty.innerText = ".aplayer .aplayer-lrc:after {content: none !;}; .aplayer .aplayer-lrc:before { content: none !;}";
    document.head.appendChild(sty);
    let clear1 = setInterval(() => {
        // 修改初始页面
        $(".page-title").css("display", "none");
        $("#nav").css("background", "none")
        $("#nav a").css("color", "#9CBCD1")
        $("#page").css({
            "position": "fixed",
            "top": "0",
            "left": "0",
            "height": "100%",
            "width": "100%",
            "background-image": `url('https://cdn.jsdelivr.net/gh/YuJiZhao/picbed/blog/song/${data[count].title}.png')`,
            "background-size": "100% 100%",
            "background-repeat": "no-repeat"
        })
        $("#footer").css("display", "none");

        // 删除组件
        $(".aplayer-icon.aplayer-icon-menu").css("display", "none");
        $(".aplayer-list").css("display", "none");
        $(".aplayer-icon.aplayer-icon-loop").css("display", "none");
        $(".aplayer-icon.aplayer-icon-order").css("display", "none");
        $(".aplayer.aplayer-withlist .aplayer-info").css({
            "border-bottom": "none"
        })
        // 修改样式
        $(".aplayer .aplayer-info .aplayer-music .aplayer-author").css({
            "color": "#fff"
        })
        $(".aplayer .aplayer-lrc p").css({
            "color": "rgb(238,122,45)",
            "font-size": "16px"
        });
        $("#article-container").css({
            "overflow": "visible",
        })
        $("#aplayer-dHveJhAh").css({
            "overflow": "visible",
        })
        $(".aplayer").css({
            "background": "none",
            "color": "#fff"
        })
        $(".aplayer-body").css({
            "position": "fixed",
            "bottom": "5%",
            "left": "10%",
            "width": "80%"
        });
        $(".aplayer-lrc").css({
            "position": "fixed",
            "top": "45%",
            "left": "50%",
            "transform": "translate(-50%, -50%)",
            "width": "80%",
            "height": "70%",
        });
        $(".aplayer-lrc-contents").css({
            "margin-top": "20%"
        })
        $(".aplayer-played").css({
            "background": "rgb(20, 214, 214)"
        })
    })
    setTimeout(() => {
        clearInterval(clear1);
    }, 3000)

// $(".aplayer-list").css({
//   "display": "block",
//   "width": "30%",
//   "position": "fixed",
//   "top": "45%",
//   "left": "25%",
//   "transform": "translate(-50%,-50%)",
//   "height": "70%",
// });
</script>

</html>